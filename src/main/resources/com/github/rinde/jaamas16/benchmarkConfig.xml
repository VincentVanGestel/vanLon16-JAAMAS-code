<?xml version="1.0" encoding="UTF-8"?>
<plannerBenchmark>
	<benchmarkDirectory>files/results/OPTAPLANNER_BENCHMARK</benchmarkDirectory>
	<warmUpSecondsSpentLimit>30</warmUpSecondsSpentLimit>
	<parallelBenchmarkCount>AUTO</parallelBenchmarkCount>

	<inheritedSolverBenchmark>
		<problemBenchmarks>
			<solutionFileIOClass>com.github.rinde.jaamas16.OptaplannerGendreauIO</solutionFileIOClass>
			<inputSolutionFile>files/gendreau2006/requests/req_rapide_1_240_24</inputSolutionFile>
			 <inputSolutionFile>files/gendreau2006/requests/req_rapide_2_240_24</inputSolutionFile> 
			 <inputSolutionFile>files/gendreau2006/requests/req_rapide_3_240_24</inputSolutionFile> 
		      <inputSolutionFile>files/gendreau2006/requests/req_rapide_4_240_24</inputSolutionFile>
		      <inputSolutionFile>files/gendreau2006/requests/req_rapide_5_240_24</inputSolutionFile> 
				
			<!--	<inputSolutionFile>files/gendreau2006/requests/req_rapide_1_240_33</inputSolutionFile> 
				<inputSolutionFile>files/gendreau2006/requests/req_rapide_2_240_33</inputSolutionFile> <inputSolutionFile>files/gendreau2006/requests/req_rapide_3_240_33</inputSolutionFile> <inputSolutionFile>files/gendreau2006/requests/req_rapide_4_240_33</inputSolutionFile> 
				<inputSolutionFile>files/gendreau2006/requests/req_rapide_5_240_33</inputSolutionFile> <inputSolutionFile>files/gendreau2006/requests/req_rapide_1_450_24</inputSolutionFile> <inputSolutionFile>files/gendreau2006/requests/req_rapide_2_450_24</inputSolutionFile> 
				<inputSolutionFile>files/gendreau2006/requests/req_rapide_3_450_24</inputSolutionFile> <inputSolutionFile>files/gendreau2006/requests/req_rapide_4_450_24</inputSolutionFile> <inputSolutionFile>files/gendreau2006/requests/req_rapide_5_450_24</inputSolutionFile> -->
		</problemBenchmarks>
		<solver>
			<!-- Common solver configuration -->
			<environmentMode>REPRODUCIBLE</environmentMode>
			<randomType>MERSENNE_TWISTER</randomType>
			<solutionClass>com.github.rinde.logistics.pdptw.solver.optaplanner.PDPSolution</solutionClass>
			<entityClass>com.github.rinde.logistics.pdptw.solver.optaplanner.ParcelVisit</entityClass>
			<entityClass>com.github.rinde.logistics.pdptw.solver.optaplanner.Visit</entityClass>

			<scoreDirectorFactory>
				<scoreDefinitionType>HARD_SOFT_LONG</scoreDefinitionType>
				<incrementalScoreCalculatorClass>com.github.rinde.logistics.pdptw.solver.optaplanner.ScoreCalculator</incrementalScoreCalculatorClass>
			</scoreDirectorFactory>

			<termination>
				<unimprovedMillisecondsSpentLimit>180000</unimprovedMillisecondsSpentLimit>
			</termination>

			<constructionHeuristic>
				<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
			</constructionHeuristic>
			<localSearch>
				<!-- <acceptor>
					<simulatedAnnealingStartingTemperature>2hard/999999999999soft</simulatedAnnealingStartingTemperature>
				</acceptor> --> 
				<unionMoveSelector>
					<moveIteratorFactory>
						<moveIteratorFactoryClass>com.github.rinde.logistics.pdptw.solver.optaplanner.MoveItFactory</moveIteratorFactoryClass>
					</moveIteratorFactory>
					<changeMoveSelector>
						<filterClass>com.github.rinde.logistics.pdptw.solver.optaplanner.ChangeFilter</filterClass>
					</changeMoveSelector>
					<changeMoveSelector>
						<entitySelector>
							<filterClass>com.github.rinde.logistics.pdptw.solver.optaplanner.EntityFilter</filterClass>
						</entitySelector>
					</changeMoveSelector>
				</unionMoveSelector>
			</localSearch>
		</solver>
	</inheritedSolverBenchmark>

<solverBenchmark>
        <name>First fit decreasing</name>
</solverBenchmark>

<#list [500, 1000, 2000] as acceptedCountLimit>
	<solverBenchmark>
		<name>Hill climbing ${acceptedCountLimit}</name>
		<solver>
			<localSearch>
				<acceptor>
					<acceptorType>HILL_CLIMBING</acceptorType>
				</acceptor>
				<forager>
					<acceptedCountLimit>${acceptedCountLimit}</acceptedCountLimit>
				</forager>
			</localSearch>
		</solver>
	</solverBenchmark>
</#list>

<#list [500, 1000, 2000] as acceptedCountLimit>
<#list [0.01, 0.02, 0.03] as tabuRatio>
	<solverBenchmark>
	<name>Tabu search acceptCoutLim ${acceptedCountLimit} tabuRatio ${tabuRatio}</name>
	<solver>
		<localSearch>
			<acceptor>
				<entityTabuRatio>${tabuRatio}</entityTabuRatio>
			</acceptor>
			<forager>
				<acceptedCountLimit>${acceptedCountLimit}</acceptedCountLimit>
			</forager>
		  </localSearch>
	   </solver>
    </solverBenchmark>
</#list>
</#list>

<#list [1,2,3,4] as acceptedCountLimit>
	<solverBenchmark>
		<name>Simulated annealing ${acceptedCountLimit}</name>
		<solver>
			<localSearch>
				<acceptor>
					<simulatedAnnealingStartingTemperature>2hard/999999999999soft</simulatedAnnealingStartingTemperature>
				</acceptor>
				<forager>
					<acceptedCountLimit>${acceptedCountLimit}</acceptedCountLimit>
				</forager>
			</localSearch>
		</solver>
	</solverBenchmark>
</#list>

<#list [1,2,3,4] as acceptedCountLimit>
    <solverBenchmark>
        <name>Simulated annealing ${acceptedCountLimit} with tabu 5</name>
        <solver>
            <localSearch>
                <acceptor>
                    <simulatedAnnealingStartingTemperature>2hard/999999999999soft</simulatedAnnealingStartingTemperature>
                    <entityTabuSize>5</entityTabuSize>
                </acceptor>
                <forager>
                    <acceptedCountLimit>${acceptedCountLimit}</acceptedCountLimit>
                </forager>
            </localSearch>
        </solver>
    </solverBenchmark>
</#list>


	<solverBenchmark>
		<name>Late acceptance</name>
		<solver>
			<localSearch>
				<acceptor>
					<lateAcceptanceSize>400</lateAcceptanceSize>
				</acceptor>
				<forager>
					<acceptedCountLimit>1</acceptedCountLimit>
				</forager>
			</localSearch>
		</solver>
	</solverBenchmark>

	<solverBenchmark>
		<name>Late acceptance with tabu</name>
		<solver>
			<localSearch>
				<acceptor>
					<lateAcceptanceSize>400</lateAcceptanceSize>
					<entityTabuSize>5</entityTabuSize>
				</acceptor>
				<forager>
					<acceptedCountLimit>1</acceptedCountLimit>
				</forager>
			</localSearch>
		</solver>
	</solverBenchmark>
	
	<solverBenchmark>
        <name>Late acceptance with tabu and strategic oscillation</name>
        <solver>
            <localSearch>
                <acceptor>
                    <lateAcceptanceSize>400</lateAcceptanceSize>
                    <entityTabuSize>5</entityTabuSize>
                </acceptor>
                <forager>
                    <acceptedCountLimit>1</acceptedCountLimit>
                    <finalistPodiumType>STRATEGIC_OSCILLATION</finalistPodiumType>
                </forager>
            </localSearch>
        </solver>
    </solverBenchmark>

	<solverBenchmark>
		<name>Step counting hill climbing</name>
		<solver>
			<localSearch>
				<acceptor>
					<stepCountingHillClimbingSize>400</stepCountingHillClimbingSize>
				</acceptor>
				<forager>
					<acceptedCountLimit>1</acceptedCountLimit>
				</forager>
			</localSearch>
		</solver>
	</solverBenchmark>
	
	<solverBenchmark>
        <name>Step counting hill climbing with tabu</name>
        <solver>
            <localSearch>
                <acceptor>
                    <stepCountingHillClimbingSize>400</stepCountingHillClimbingSize>
                    <entityTabuSize>5</entityTabuSize>
                </acceptor>
                <forager>
                    <acceptedCountLimit>1</acceptedCountLimit>
                </forager>
            </localSearch>
        </solver>
    </solverBenchmark>
    
    <solverBenchmark>
        <name>Step counting hill climbing with tabu and strategic oscillation</name>
        <solver>
            <localSearch>
                <acceptor>
                    <stepCountingHillClimbingSize>400</stepCountingHillClimbingSize>
                    <entityTabuSize>5</entityTabuSize>
                </acceptor>
                <forager>
                    <acceptedCountLimit>1</acceptedCountLimit>
                    <finalistPodiumType>STRATEGIC_OSCILLATION</finalistPodiumType>
                </forager>
            </localSearch>
        </solver>
    </solverBenchmark>

    <!-- SECOND BENCHMARK PHASE PLANNERS -->
    
    <#list [400, 600, 1500, 2500] as acceptedCountLimit>
    <#list [0.015, 0.02, 0.025] as tabuRatio>
    <solverBenchmark>
    <name>Tabu search acceptCoutLim ${acceptedCountLimit} tabuRatio ${tabuRatio}</name>
    <solver>
        <localSearch>
            <acceptor>
                <entityTabuRatio>${tabuRatio}</entityTabuRatio>
            </acceptor>
            <forager>
                <acceptedCountLimit>${acceptedCountLimit}</acceptedCountLimit>
            </forager>
          </localSearch>
       </solver>
    </solverBenchmark>
    </#list>
    </#list>
    
    <#list [500, 1000, 2000] as acceptedCountLimit>
    <#list [0.015, 0.025] as tabuRatio>
    <solverBenchmark>
    <name>Tabu search acceptCoutLim ${acceptedCountLimit} tabuRatio ${tabuRatio}</name>
    <solver>
        <localSearch>
            <acceptor>
                <entityTabuRatio>${tabuRatio}</entityTabuRatio>
            </acceptor>
            <forager>
                <acceptedCountLimit>${acceptedCountLimit}</acceptedCountLimit>
            </forager>
          </localSearch>
       </solver>
    </solverBenchmark>
    </#list>
    </#list>
    
    <#list [250, 750, 1500, 2500] as acceptedCountLimit>
    <solverBenchmark>
        <name>Hill climbing ${acceptedCountLimit}</name>
        <solver>
            <localSearch>
                <acceptor>
                    <acceptorType>HILL_CLIMBING</acceptorType>
                </acceptor>
                <forager>
                    <acceptedCountLimit>${acceptedCountLimit}</acceptedCountLimit>
                </forager>
            </localSearch>
        </solver>
    </solverBenchmark>
    </#list>
    
    <#list [200, 300, 500,600, 800, 1200] as acceptedCountLimit>
    <solverBenchmark>
        <name>Late acceptance ${acceptedCountLimit}</name>
        <solver>
            <localSearch>
                <acceptor>
                    <lateAcceptanceSize>400</lateAcceptanceSize>
                </acceptor>
                <forager>
                    <acceptedCountLimit>1</acceptedCountLimit>
                </forager>
            </localSearch>
        </solver>
    </solverBenchmark>
    </#list>
   

</plannerBenchmark>